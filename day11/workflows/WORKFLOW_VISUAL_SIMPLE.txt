â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  DAY 11 n8n WORKFLOW - VISUAL SIMPLIFICADO                   â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—


                            ğŸ¯ FLUXO PRINCIPAL
                            â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                               â° TRIGGER
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Schedule Cron   â”‚
                          â”‚   Daily 8am UTC  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            ğŸ“… VALIDATION
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Check Weekend   â”‚
                          â”‚  Skip if needed  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                              â“ DECISION
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Should Run?    â”‚
                          â”‚   IF condition   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼
              ğŸŒ FETCH GA4    ğŸ’° FETCH ADS    (skip)
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ HTTP Request â”‚ â”‚HTTP Request â”‚
            â”‚ Day 01 API   â”‚ â”‚ Day 01 API  â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                â”‚
                   â”‚   âŒ If fails  â”‚
                   â–¼                â–¼
              ğŸ“ FALLBACK TO CSV FILES
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Read Local CSV Files      â”‚
            â”‚  day01/data/processed/*.csvâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    ğŸ§® CALCULATE
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Calculate Metrics      â”‚
            â”‚   â€¢ Sessions, Conversionsâ”‚
            â”‚   â€¢ Spend, CPC, CTR     â”‚
            â”‚   â€¢ Top Source/Campaign â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    ğŸ¨ FORMAT
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Format Slack Message    â”‚
            â”‚  â€¢ 13 Block Kit blocks   â”‚
            â”‚  â€¢ Markdown formatting   â”‚
            â”‚  â€¢ Emojis & highlights  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    ğŸ“¤ SEND
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Send to Slack          â”‚
            â”‚   POST to webhook        â”‚
            â”‚   Retry: 3x, 10s delay  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    ğŸ“Š LOG
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Log to Google Sheets    â”‚
            â”‚  Track: time, metrics   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                         âŒ FLUXO DE ERRO
                         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

              (Qualquer erro acima ativa)
                           â”‚
                           â–¼
                    ğŸš¨ FORMAT ERROR
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Format Error Message     â”‚
            â”‚ Create error blocks      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  ğŸ“¤ NOTIFY ERROR
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Send Error to Slack      â”‚
            â”‚ Alert team immediately   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            NODES DETALHADOS                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

 NODE 1: â° Schedule Trigger
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Cron Trigger
 Config: 0 8 * * * (Daily 8am UTC)
 Output: Trigger event
 
 
 NODE 2: ğŸ“… Check Weekend
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Code (JavaScript)
 Input: Date
 Logic: if (isWeekend && !runOnWeekends) skip
 Output: { skip: boolean, date, dayOfWeek }
 
 
 NODE 3: â“ Should Run?
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: IF Node
 Condition: skip === false
 True â†’ Continue
 False â†’ Stop
 
 
 NODE 4: ğŸŒ Fetch GA4 Data
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: HTTP Request
 URL: http://localhost:5000/api/day01/ga4
 Method: GET
 Timeout: 10s
 On Error: Continue (fallback)
 
 
 NODE 5: ğŸ’° Fetch Ads Data
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: HTTP Request
 URL: http://localhost:5000/api/day01/ads
 Method: GET
 Parallel: YES (runs with Node 4)
 On Error: Continue (fallback)
 
 
 NODE 6: ğŸ“ Fallback CSV
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Code (JavaScript)
 Trigger: If HTTP fails
 Logic: Read local CSV files
 Files: ga4_sessions.csv, ads_campaigns.csv
 Output: { ga4, ads, source: 'CSV' }
 
 
 NODE 7: ğŸ§® Calculate Metrics
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Code (JavaScript)
 Input: GA4 + Ads data
 Process: Parse CSV, aggregate
 Output: 18 KPIs object
 
 
 NODE 8: ğŸ¨ Format Slack
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Code (JavaScript)
 Input: Metrics object
 Process: Build Block Kit JSON
 Output: { blocks: [], text: '' }
 Blocks: 13 formatted sections
 
 
 NODE 9: ğŸ“¤ Send to Slack
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: HTTP Request
 URL: $env.DAY11_SLACK_WEBHOOK_URL
 Method: POST
 Body: { blocks, text }
 Retry: 3 attempts, 10s delay
 
 
 NODE 10: ğŸ“Š Log Execution
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Google Sheets
 Operation: Append Row
 Sheet: day11_execution_log
 Data: timestamp, status, metrics
 
 
 NODE 11: ğŸš¨ Format Error
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: Code (JavaScript)
 Trigger: On any error
 Input: Error object
 Output: Error blocks for Slack
 
 
 NODE 12: ğŸ“¤ Send Error
 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Tipo: HTTP Request
 URL: Slack webhook
 Body: Error notification
 Priority: High


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         COMO VAI APARECER NO n8n                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Quando vocÃª importar o workflow, verÃ¡ este layout visual no canvas:


    â°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                               â”‚
    â–¼                                                               â”‚
   ğŸ“…â”€â”€â”€â”€â”€â”                                                         â”‚
         â”‚                                                          â”‚
         â–¼                                                          â”‚
        â“                                                          â”‚
         â”‚                                                          â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                                    â”‚
    â–¼         â–¼                                                    â”‚
   ğŸŒ        ğŸ’°                                                    â”‚
    â”‚         â”‚                                                    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                    â”‚
         â–¼                                                          â”‚
        ğŸ“                                                          â”‚
         â–¼                                                          â”‚
        ğŸ§®                                                          â”‚
         â–¼                                                          â”‚
        ğŸ¨                                                          â”‚
         â–¼                                                          â”‚
        ğŸ“¤â”€â”€â”€â”€â”€â”                                                    â”‚
         â”‚     â”‚                                                    â”‚
         â–¼     â””â”€â”€â”€â”€ (error) â”€â”€â”€â–º ğŸš¨ â”€â”€â”€â–º ğŸ“¤                       â”‚
        ğŸ“Š                                                          â”‚
         â”‚                                                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            EXECUÃ‡ÃƒO REAL                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Quando executar, vocÃª verÃ¡ dados fluindo em tempo real:

â° Schedule Trigger âœ…
   â†“ [Timestamp: 2025-12-11 08:00:00]

ğŸ“… Check Weekend âœ…
   â†“ { skip: false, date: "2025-12-11", dayOfWeek: "Wednesday" }

â“ Should Run? âœ… TRUE
   â†“ Continuing to fetch...

ğŸŒ Fetch GA4 âš ï¸ Failed (no API)
ğŸ’° Fetch Ads âš ï¸ Failed (no API)
   â†“ Both failed â†’ triggering fallback

ğŸ“ Fallback CSV âœ…
   â†“ { ga4: "150 rows", ads: "120 rows", source: "CSV" }

ğŸ§® Calculate âœ…
   â†“ { total_sessions: 198611, total_spend: 67306.60, ... }

ğŸ¨ Format âœ…
   â†“ { blocks: [13 items], text: "Daily Report..." }

ğŸ“¤ Send to Slack âœ…
   â†“ Response: 200 OK

ğŸ“Š Log âœ…
   â†“ Row appended to Google Sheet

âœ… WORKFLOW COMPLETE


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        PRÃ“XIMOS PASSOS                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Importe o arquivo day11_n8n_workflow_IMPORTABLE.json no n8n

2. Configure:
   âœ“ Slack webhook URL
   âœ“ Google Sheets (opcional)
   âœ“ Environment variables

3. Teste manualmente (botÃ£o "Test Workflow")

4. Ative (toggle "Active")

5. Aguarde execuÃ§Ã£o Ã s 8am ou force manualmente

6. Veja o relatÃ³rio no Slack! ğŸ‰


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
